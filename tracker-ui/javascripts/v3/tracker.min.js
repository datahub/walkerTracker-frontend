// WalkerTracker v3.0.0
function rT(e,a,t){return tpl[e][a](t)}function dV(e){return e.undelegateEvents(),e.$el.removeData().unbind(),e.$el.empty(),e.stopListening(),e}function rC(){var e=$(".map-holder").width(),a=e;e>600&&(a=600),$(".stately").width(a),$(".stately li").css({"font-size":a})}function rW(){var e=$(window).height(),a=[".homepage",".list-view",".detail-view",".homepage .exit-off-canvas",".list-view .exit-off-canvas",".detail-view .exit-off-canvas",".right-off-canvas-menu",".tab-bar .exit-off-canvas"];$(a).each(function(a,t){var n=0;n=".right-off-canvas-menu"==t?e:".tab-bar .exit-off-canvas"==t?$(".tab-bar").outerHeight():".homepage .exit-off-canvas"==t?$($(".homepage > *")[0]).outerHeight():".list-view .exit-off-canvas"==t?$($(".list-view > *")[0]).outerHeight():".detail-view .exit-off-canvas"==t?$($(".detail-view > *")[0]).outerHeight():e-$(".tab-bar").outerHeight(),$(t).height(n)}),rC()}var debug=!1,generateURLs={"campaign-finance":{list:function(e){var a,t,n=e.queryDict;if(_.isEmpty(n))t=1;else if(t=1,_.has(n,"page")){var i=n.page;$.isNumeric(i)&&parseInt(i,10)>0&&(t=""+parseInt(i,10))}return a="campaign-finance/all/?page="+t,debug?e.facetConfig.baseURL+a:e.facetConfig.baseURL+a+"&spaceless=true"},detail:function(e){var a;return a="campaign-finance/by-state/"+e.dataID+"/",debug?e.facetConfig.baseURL+a:e.facetConfig.baseURL+a+"?spaceless=true"}},"media-appearances":{list:function(e){var a,t,n,i,r=e.queryDict;if(_.isEmpty(r))t="all",queryIssue=null,i=1;else{if(t="all",_.has(r,"organization")){var s=r.organization;t=s.toLowerCase()}if(n=null,_.has(r,"issue")){var o=r.issue;n=o}if(i=1,_.has(r,"page")){var c=r.page;$.isNumeric(c)&&parseInt(c,10)>0&&(i=""+parseInt(c,10))}}return void 0===n||null===n?(e.chaperone.view.tagArchiveQueryDict={},a="all"==t?"media-appearances/all/?page="+i:"media-appearances/organization/"+t+"/?page="+i):a="media-appearances/tag/"+n+"/?page="+i,debug?e.facetConfig.baseURL+a:e.facetConfig.baseURL+a+"&spaceless=true"},tagArchive:function(e){var a,t,n=e.queryDict;if(_.isEmpty(n))t=1;else if(t=1,_.has(n,"page")){var i=n.page;$.isNumeric(i)&&parseInt(i,10)>0&&(t=""+parseInt(i,10))}return a="media-appearances/tags/by-page/?page="+t,debug?e.facetConfig.baseURL+a:e.facetConfig.baseURL+a+"&spaceless=true"},detail:function(e){var a="media-appearances/id/"+e.dataID+"/";return debug?e.facetConfig.baseURL+a:e.facetConfig.baseURL+a+"?spaceless=true"}},travel:{list:function(e){var a,t,n,i,r=e.queryDict;if(_.isEmpty(r))t="US",queryIssue=null,i=1;else{if(t="US",_.has(r,"area")){var s=r.area,o=_.where(e.facetConfig.queryAreas,{a:s}).length;o>0&&(t=s)}if(n=null,_.has(r,"issue")){var c=r.issue;n=c}if(i=1,_.has(r,"page")){var l=r.page;$.isNumeric(l)&&parseInt(l,10)>0&&(i=""+parseInt(l,10))}}return void 0===n||null===n?(e.chaperone.view.tagArchiveQueryDict={},a="US"==t?"events/all/?page="+i:"events/state/"+t+"/?page="+i):a="events/tag/"+n+"/?page="+i,debug?e.facetConfig.baseURL+a:e.facetConfig.baseURL+a+"&spaceless=true"},tagArchive:function(e){var a,t,n=e.queryDict;if(_.isEmpty(n))t=1;else if(t=1,_.has(n,"page")){var i=n.page;$.isNumeric(i)&&parseInt(i,10)>0&&(t=""+parseInt(i,10))}return a="events/tags/by-page/?page="+t,debug?e.facetConfig.baseURL+a:e.facetConfig.baseURL+a+"&spaceless=true"},detail:function(e){var a="events/id/"+e.dataID+"/";return debug?e.facetConfig.baseURL+a:e.facetConfig.baseURL+a+"?spaceless=true"}}};facetConfigs={"media-appearances":{baseURL:"http://aukofer.dhb.io/api/v3/",parseListViewFacets:function(e,a){var t={};if(_.has(a,"organization")&&(t.organization=a.organization.toLowerCase()),_.has(a,"issue")&&(t.issue=a.issue),_.has(a,"page")){var n=parseInt(a.page,10);isInteger(n)&&(t.page=n)}return t},parseTagArchiveFacets:function(e,a){var t={};if(_.has(a,"page")){var n=parseInt(a.page,10);isInteger(n)&&(t.page=n)}return t},reassembleFacets:function(e){var a,t=[];return _.each(e,function(e,a){t.push("page"==a?a+"="+e:a+"="+e.toLowerCase())}),a=t.join(",")},storeListResponseData:function(e,a){e.collectionData=a.appearances,e.organizationList=a.mediaOrganizations,e.verboseTagName=a.tagName,e.paginationData=a.pagination},generateListItemContext:function(e,a){return a},listHasRightNav:!0,renderRightNav:function(e){var a=[],t={title:"Filter by organization",items:[],order:1};a.push({title:"Filter by issue",items:[{anchorClass:"tags-trigger",anchorLink:"#!/"+e.facetSlug+"/tags/",spanClass:"ss-icon ss-tag",value:"Issues &raquo;"}],order:0}),activeOrganization=_.has(e.queryDict,"organization")?e.queryDict.organization:"all",_.each(e.organizationList,function(a){var n="organization-trigger",i=_.clone(e.queryDict);i.organization=a.a,delete i.page;var r,s=e.facetConfig.reassembleFacets(i);r="US"==a.a?"#!/"+e.facetSlug+"/":"#!/"+e.facetSlug+"/refine/"+s+"/",activeOrganization==a.a&&(n+=" active"),t.items.push({anchorClass:n,anchorLink:r,spanClass:"",value:a.fn})}),a.push(t),e.chaperone.view.rightMenu.setListElements(a)},enhanceHeader:function(e){var a="";if(_.has(e.queryDict,"organization")){if("all"!=e.queryDict.organization&&void 0!==e.organizationList){var t=_.findWhere(e.organizationList,{a:e.queryDict.organization}).fn;a="by "+t}}else if(_.has(e.queryDict,"issue"))return'mentioning "'+e.verboseTagName+'"';return" "+a},enhanceTagArchiveHeader:function(){var e="Issues discussed";return e},listHolderID:"appearances",listHeaderBase:"Interviews",listClass:"appearance-list",tagArchiveHeaderPlaceholder:"Issues discussed",tagArchiveClass:"appearance-tags",itemClasses:{detail:"appearance",advertisement:"ad",tagArchiveItem:"tag",tagAdvertisement:"ad",placeholder:"placeholder"},generateDetailViewContext:function(e,a){var t=_.clone(a);return t.rowData=e.appearance,t},generateBonusItemClass:function(e){var a,t,n=_.clone(e.chaperone.chaperone.view.listQueryDict);delete n.page;var i=_.isEmpty(n);return i||(isOrganizationView=_.has(n,"organization"),t=_.has(n,"issue")),i?a="organization-list":isOrganizationView?a="show-list":t&&(a="tag-list"),a},generateBonusItemURL:function(e){var a,t,n=_.clone(e.chaperone.chaperone.view.listQueryDict);delete n.page;var i=_.isEmpty(n);return i||(isOrganizationView=_.has(n,"organization"),t=_.has(n,"issue")),i?a="#!/"+e.chaperone.facetSlug+"/in-depth/":isOrganizationView?a="#!/"+e.chaperone.facetSlug+"/refine/"+e.chaperone.facetConfig.reassembleFacets(e.pagelessQueryDict)+"/in-depth/":t&&(a="#!/"+e.chaperone.facetSlug+"/tags/"),a},generateBonusItemContext:function(e){var a,t=_.clone(e.chaperone.chaperone.view.listQueryDict),n={};delete t.page;var i=_.isEmpty(t);return i||(isOrganizationView=_.has(t,"organization"),a=_.has(t,"issue")),i?n.itemToOpen="list of organizations":isOrganizationView?n.itemToOpen="list of shows":a&&(n.itemToOpen="list of all issues"),n},renderVisualization:function(e,a){var t,n="all",i=e.chaperone.view.listQueryDict;if(_.has(i,"organization")){var r=i.organization.toLowerCase();n=r}t=debug?e.facetConfig.baseURL+"media-appearances/visualizations/"+n.toLowerCase()+"/":e.facetConfig.baseURL+"media-appearances/visualizations/"+n.toLowerCase()+"/?spaceless=true",$.ajax({url:t,dataType:"jsonp",type:"GET",jsonp:"callback",contentType:"application/json",success:function(e){void 0!==a&&null!==a&&a(e)},error:function(){}})},visualizationDataMap:{currentMode:"currentView",frequencyCounts:"appearanceCounts"},generateVisualizationContext:function(e){return{viewType:e.currentMode,frequencies:e.frequencyCounts}},visualizationPostRenderHooks:function(){},detailPostRenderHooks:function(){}},"campaign-finance":{baseURL:"http://aukofer.dhb.io/api/v3/",parseListViewFacets:function(e,a){var t={};if(_.has(a,"page")){var n=parseInt(a.page,10);isInteger(n)&&(t.page=n)}return t},reassembleFacets:function(e){var a,t=[];return _.each(e,function(e,a){t.push("page"==a?a+"="+e:a+"="+e.toLowerCase())}),a=t.join(",")},storeListResponseData:function(e,a){e.collectionData=a.aggregates,e.dataStartDate=a.startDate,e.dataEndDate=a.endDate,e.verboseTagName=a.tagName,e.paginationData=a.pagination},generateListItemContext:function(e,a){return a.dataStartDate=e.dataStartDate,a.dataEndDate=e.dataEndDate,a},listHasRightNav:!1,enhanceHeader:function(){return""},callbacks:{list:"loadStateDonationTotals",detail:"loadStateSummary"},listHolderID:"finances",listHeaderBase:"Donations to Walker&rsquo;s state committee",listClass:"donation-list",itemClasses:{detail:"donation",advertisement:"ad",placeholder:"placeholder"},generateDetailViewContext:function(e,a){var t=_.clone(a);return t.rowData=e.stateData,t.dataStartDate=e.startDate,t.dataEndDate=e.endDate,t},generateBonusItemClass:function(){var e="map";return e},generateBonusItemURL:function(e){var a="#!/"+e.chaperone.facetSlug+"/in-depth/";return a},generateBonusItemContext:function(){var e={};return e.itemToOpen="state-by-state map",e},renderVisualization:function(e,a){var t=e.facetConfig.baseURL+"campaign-finance/visualizations/us/";debug||(t+="?spaceless=true"),$.ajax({url:t,dataType:"jsonp",type:"GET",jsonp:"callback",contentType:"application/json",success:function(e){void 0!==a&&null!==a&&a(e)},error:function(){}})},visualizationDataMap:{currentMode:"currentArea",frequencyCounts:"locationCounts"},generateVisualizationContext:function(e){var a,t=5,n=jenks(_.pluck(e.frequencyCounts,"total"),t).splice(1,t-1);return a={one:formatCurrency(0,0)+"&thinsp;&ndash;&thinsp;"+formatCurrency(n[0],0),two:formatCurrency(n[0],0)+"&thinsp;&ndash;&thinsp;"+formatCurrency(n[1],0),three:formatCurrency(n[1],0)+"&thinsp;&ndash;&thinsp;"+formatCurrency(n[2],0),four:formatCurrency(n[2],0)+"&thinsp;&ndash;&thinsp;"+formatCurrency(n[3],0),five:"&gt;&nbsp;"+formatCurrency(n[2],0)},e.tierMaxes=n,{viewMode:e.currentMode,legend:a,frequencies:e.frequencyCounts}},visualizationPostRenderHooks:function(e){"US"==e.currentMode&&_.each(e.frequencyCounts,function(a){e.facetConfig.classifyState(e.$el.find(".stately"),a.statePostal,e.tierMaxes,a.total)}),rC()},classifyState:function(e,a,t,n){n>t[3]?(e.find("."+a).addClass("tier-five"),eee=e):e.find("."+a).addClass(n>t[2]?"tier-four":n>t[1]?"tier-three":n>t[0]?"tier-two":"tier-one")},detailPostRenderHooks:function(e){void 0!==e.rowContext&&$.ajax({url:e.rowContext.rowData.queryURL,dataType:"jsonp",type:"GET",jsonp:"callback",contentType:"application/json",success:function(a){var t=e.$el.find("#largest-donations tbody");_.each(a.results.slice(0,10),function(a){var n=rT(e.facetSlug,"_tF",a);t.append(n)}),e.$el.find(".obbes-lower-link a").html("Explore all donations from "+e.rowContext.rowData.stateNameFull+"&nbsp;&raquo;")},error:function(){}})}},travel:{baseURL:"http://aukofer.dhb.io/api/v3/",queryAreas:[{a:"US",fn:"Entire U.S."},{a:"AL",fn:"Alabama"},{a:"AK",fn:"Alaska"},{a:"AZ",fn:"Arizona"},{a:"AR",fn:"Arkansas"},{a:"CA",fn:"California"},{a:"CO",fn:"Colorado"},{a:"CT",fn:"Connecticut"},{a:"DE",fn:"Delaware"},{a:"DC",fn:"D.C."},{a:"FL",fn:"Florida"},{a:"GA",fn:"Georgia"},{a:"HI",fn:"Hawaii"},{a:"ID",fn:"Idaho"},{a:"IL",fn:"Illinois"},{a:"IN",fn:"Indiana"},{a:"IA",fn:"Iowa"},{a:"KS",fn:"Kansas"},{a:"KY",fn:"Kentucky"},{a:"LA",fn:"Louisiana"},{a:"ME",fn:"Maine"},{a:"MD",fn:"Maryland"},{a:"MA",fn:"Massachusetts"},{a:"MI",fn:"Michigan"},{a:"MN",fn:"Minnesota"},{a:"MS",fn:"Mississippi"},{a:"MO",fn:"Missouri"},{a:"MT",fn:"Montana"},{a:"NE",fn:"Nebraska"},{a:"NV",fn:"Nevada"},{a:"NH",fn:"New Hampshire"},{a:"NJ",fn:"New Jersey"},{a:"NM",fn:"New Mexico"},{a:"NY",fn:"New York"},{a:"NC",fn:"North Carolina"},{a:"ND",fn:"North Dakota"},{a:"OH",fn:"Ohio"},{a:"OK",fn:"Oklahoma"},{a:"OR",fn:"Oregon"},{a:"PA",fn:"Pennsylvania"},{a:"RI",fn:"Rhode Island"},{a:"SC",fn:"South Carolina"},{a:"SD",fn:"South Dakota"},{a:"TN",fn:"Tennessee"},{a:"TX",fn:"Texas"},{a:"UT",fn:"Utah"},{a:"VT",fn:"Vermont"},{a:"VA",fn:"Virginia"},{a:"WA",fn:"Washington"},{a:"WV",fn:"West Virginia"},{a:"WY",fn:"Wyoming"}],parseListViewFacets:function(e,a){var t={};if(_.has(a,"area")){var n=a.area.toUpperCase(),i=_.pluck(e.facetConfig.queryAreas,"a");_.contains(i,n)&&"US"!=n&&(t.area=n)}if(_.has(a,"issue")&&(t.issue=a.issue),_.has(a,"page")){var r=parseInt(a.page,10);isInteger(r)&&(t.page=r)}return t},parseTagArchiveFacets:function(e,a){var t={};if(_.has(a,"page")){var n=parseInt(a.page,10);isInteger(n)&&(t.page=n)}return t},reassembleFacets:function(e){var a,t=[];return _.each(e,function(e,a){t.push("page"==a?a+"="+e:a+"="+e.toLowerCase())}),a=t.join(",")},storeListResponseData:function(e,a){e.collectionData=a.events,e.verboseTagName=a.tagName,e.paginationData=a.pagination},generateListItemContext:function(e,a){return a},listHasRightNav:!0,renderRightNav:function(e){var a,t=[],n={title:"Filter by area",items:[],order:1};t.push({title:"Filter by issue",items:[{anchorClass:"tags-trigger",anchorLink:"#!/"+e.facetSlug+"/tags/",spanClass:"ss-icon ss-tag",value:"Issues &raquo;"}],order:0}),a=_.has(e.queryDict,"area")?e.queryDict.area:"US",_.each(e.facetConfig.queryAreas,function(t){var i="area-trigger",r=_.clone(e.queryDict);r.area=t.a,delete r.page;var s,o=e.facetConfig.reassembleFacets(r);s="US"==t.a?"#!/"+e.facetSlug+"/":"#!/"+e.facetSlug+"/refine/"+o+"/",a==t.a&&(i+=" active"),n.items.push({anchorClass:i,anchorLink:s,spanClass:"stateface stateface-"+t.a.toLowerCase(),value:t.fn})}),t.push(n),e.chaperone.view.rightMenu.setListElements(t)},enhanceHeader:function(e){var a="nationwide";if(_.has(e.queryDict,"area")){var t;t="DC"==e.queryDict.area?"Washington, D.C.":_.findWhere(e.facetConfig.queryAreas,{a:e.queryDict.area}).fn,a="in "+t}else if(_.has(e.queryDict,"issue"))return'mentioning "'+e.verboseTagName+'"';return" "+a},enhanceTagArchiveHeader:function(){var e="Issues discussed";return e},listHolderID:"events",listHeaderBase:"Visits",listClass:"visit-list",tagArchiveHeaderPlaceholder:"Issues discussed",tagArchiveClass:"visit-tags",itemClasses:{detail:"visit",advertisement:"ad",tagArchiveItem:"tag",tagAdvertisement:"ad",placeholder:"placeholder"},generateDetailViewContext:function(e,a){var t=_.clone(a);return t.rowData=e.event,t},generateBonusItemClass:function(e){var a,t,n,i=_.clone(e.chaperone.chaperone.view.listQueryDict);delete i.page;var r=_.isEmpty(i);return r||(t=_.has(i,"area"),n=_.has(i,"issue")),r?a="map":t?a="state-list":n&&(a="tag-list"),a},generateBonusItemURL:function(e){var a,t,n,i=_.clone(e.chaperone.chaperone.view.listQueryDict);delete i.page;var r=_.isEmpty(i);return r||(t=_.has(i,"area"),n=_.has(i,"issue")),r?a="#!/"+e.chaperone.facetSlug+"/in-depth/":t?a="#!/"+e.chaperone.facetSlug+"/refine/"+e.chaperone.facetConfig.reassembleFacets(e.pagelessQueryDict)+"/in-depth/":n&&(a="#!/"+e.chaperone.facetSlug+"/tags/"),a},generateBonusItemContext:function(e){var a,t,n=_.clone(e.chaperone.chaperone.view.listQueryDict),i={};delete n.page;var r=_.isEmpty(n);return r||(a=_.has(n,"area"),t=_.has(n,"issue")),r?i.itemToOpen="state-by-state map":a?i.itemToOpen="city-by-city list":t&&(i.itemToOpen="list of all issues"),i},renderVisualization:function(e,a){var t,n,i="US",r=e.chaperone.view.listQueryDict;if(_.has(r,"area")){var s=r.area.toUpperCase();n=_.where(e.facetConfig.queryAreas,{a:s}),n.length>0&&(i=n[0].a)}t=debug?e.facetConfig.baseURL+"events/visualizations/"+i.toLowerCase()+"/":e.facetConfig.baseURL+"events/visualizations/"+i.toLowerCase()+"/?spaceless=true",$.ajax({url:t,dataType:"jsonp",type:"GET",jsonp:"callback",contentType:"application/json",success:function(e){void 0!==a&&null!==a&&a(e)},error:function(){}})},visualizationDataMap:{currentMode:"currentArea",frequencyCounts:"locationCounts"},generateVisualizationContext:function(e){return{viewMode:e.currentMode,frequencies:e.frequencyCounts}},visualizationPostRenderHooks:function(e){var a=[0,5,10];"US"==e.currentMode&&_.each(e.frequencyCounts,function(t){e.facetConfig.classifyState(e.$el.find(".stately"),t.stateAbbrev,a,t.frequency)}),rC()},detailPostRenderHooks:function(){},classifyState:function(e,a,t,n){n>t[2]?e.find("."+a).addClass("tier-four"):n>t[1]?e.find("."+a).addClass("tier-three"):n>t[0]&&e.find("."+a).addClass("tier-two")}}};var AppView=Backbone.View.extend({initialize:function(e){var a=this;a.currentViewLevel=-1,a.listQueryDict={},a.tagArchiveQueryDict={},void 0!==e&&void 0!==e.currentViewLevel&&(a.currentViewLevel=e.currentViewLevel),a.navView=new NavView({chaperone:a}),a.rightMenu=new OffCanvasMenuView({chaperone:a,side:"right"}),a.contentViews={0:{view:null,topClass:"homepage"},1:{view:null,topClass:"list-view"},2:{view:null,topClass:"detail-view"}}},setViewLevel:function(e){var a=this;return a.currentViewLevel=e,a},switchViewLevel:function(e){var a=this,t=a.contentViews[a.currentViewLevel],n=a.contentViews[e],i=t.topClass+"-shown",r=n.topClass+"-shown";return $(".inner-wrap").removeClass(i).addClass(r),n.view.transitionAnimations(t),a.currentViewLevel=e,a},attachView:function(e,a){var t=this;return t.contentViews[a].view=e,t},removeView:function(e){var a=this,t=a.contentViews[e].view;return dV(t),a.contentViews[e].view=null,a},render:function(){var e=this,a=[],t=e.navView;_.each(e.contentViews,function(e){a.push(e.topClass)});var n=rT("general","_tW",{activeSection:e.contentViews[e.currentViewLevel].topClass,sections:a});return e.$el.html(n),t.setElement($(".tab-bar")).render(),e.rightMenu.setElement($(".right-off-canvas-menu")),_.each(e.contentViews,function(a){void 0!==a.view&&null!==a.view&&e.renderSection(a,null,null)}),rW(),e},renderSection:function(e,a,t){var n=this;return e.view.setElement($("."+e.topClass)),e.view.render(a),e.view.bindEvents(),void 0!==a&&null===a&&e.view.transitionAnimations(null),null!==t&&n.switchViewLevel(t),n}}),NavView=Backbone.View.extend({initialize:function(){var e=this;"undefined"!=typeof config&&void 0!==config.chaperone&&(e.chaperone=config.chaperone)},generateAppTitle:function(){return"JS WalkerTracker"},render:function(){var e=this,a=rT("general","_tL",{appTitle:e.generateAppTitle()});return e.$el.html(a),e}}),OffCanvasMenuView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&(void 0!==e.chaperone&&(a.chaperone=e.chaperone),void 0!==e.side&&(a.side=e.side))},setListElements:function(e){var a=this;return a.elementViews=[],_.each(e,function(e){var t=new OCLabelItemView({chaperone:a,value:e.title});a.elementViews.push(t),_.each(e.items,function(e){var t=new OCMenuItemView({chaperone:a,valueDict:e});a.elementViews.push(t)})}),a},render:function(){var e=this,a=rT("general","_tN",{});e.$el.html(a);var t=e.$el.find(".off-canvas-list");return _.each(e.elementViews,function(e){var a=$("<li></li>");t.append(a),e.setElement(a),e.render(),e.bindEvents()}),e.$el.find(".menu-trigger").on("click",function(){$(".off-canvas-wrap").removeClass("move-left")}),e}}),OCLabelItemView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&(void 0!==e.chaperone&&(a.chaperone=e.chaperone),void 0!==e.value&&(a.value=e.value))},render:function(){var e=this,a=rT("general","_tM",{value:e.value});return e.$el.html(a),e},bindEvents:function(){var e=this;return e}}),OCMenuItemView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&(void 0!==e.chaperone&&(a.chaperone=e.chaperone),void 0!==e.valueDict&&(a.valueDict=e.valueDict))},render:function(){var e=this,a=rT("general","_tO",{anchorClass:e.valueDict.anchorClass,anchorLink:e.valueDict.anchorLink,spanClass:e.valueDict.spanClass,value:e.valueDict.value});return e.$el.html(a),e},bindEvents:function(){var e=this;return e}}),HomepageView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&void 0!==e.chaperone&&(a.chaperone=e.chaperone),a.chaperone.view.listQueryDict={},a.chaperone.view.tagArchiveQueryDict={}},render:function(){var e=this,a="http://aukofer.dhb.io/api/v3/latest-articles-feed/";debug||(a+="?spaceless=true"),$.ajax({url:a,dataType:"jsonp",type:"GET",jsonp:"callback",contentType:"application/json",success:function(a){if("2"==a.status[0]){dd=a.articles;var t=rT("general","_tG",{articles:a.articles});e.$el.html(t),e.bindEvents()}},error:function(){}})},bindEvents:function(){var e=this,a=e.$el.find(".homepage-contents .section-triggers .trigger");return a.unbind(),a.on("touchstart",function(){$(this).addClass("tapped")}),a.on("touchend",function(){$(this).removeClass("tapped")}),a.on("click",function(a){a.stopPropagation();var t=$(this).attr("facet-slug");return $(this).addClass("chosen"),$(this).removeClass("tapped"),e.chaperone.navigate("!/"+t+"/",!0),!1}),e},transitionAnimations:function(e){var a=this,t=a.chaperone.view.navView,n=t.$el.find(".left-small"),i=t.$el.find(".right-small");if(void 0===e&&(e=null),n.is(":visible")&&(null!==e?n.fadeOut(450):n.hide()),i.is(":visible")&&(null!==e?i.fadeOut(450):i.hide()),null!==e){var r=e.view.facetSlug;a.$el.find(".section-triggers .trigger").removeClass("chosen"),a.$el.find(".section-triggers .trigger[facet-slug='"+r+"']").addClass("chosen"),setTimeout(function(){$(".section-triggers > .chosen").removeClass("chosen")},300)}return a}}),ListView=Backbone.View.extend({initialize:function(e){var a=this;if(void 0!==e&&(void 0!==e.chaperone?(a.chaperone=e.chaperone,a.setQueryDict({})):a.setQueryDict({}),void 0!==e.facetSlug&&(a.facetSlug=e.facetSlug,a.facetConfig=facetConfigs[a.facetSlug]),void 0!==e.queryDict&&a.setQueryDict(e.queryDict),void 0!==e.initialFacets)){var t=e.initialFacets.split(","),n={};_.each(t,function(e){var a=e.split("=");n[a[0]]=a[1]});var i=a.facetConfig.parseListViewFacets(a,n);if(_.isEmpty(i)){var r="!/"+a.facetSlug+"/";Backbone.history.fragment!=r&&a.chaperone.navigate(r,!1)}else a.setQueryDict(i)}a.listHeaderView=new ListHeaderView({chaperone:a}),a.paginationView=new PaginationView({chaperone:a})},setQueryDict:function(e){var a=this,t={};return t=void 0===e||null===e?{}:e,a.queryDict=t,a.chaperone.view.listQueryDict=t,a},createURL:function(){var e=this;return e.queryURL=generateURLs[e.facetSlug].list(e),e},fetchItems:function(e){var a=this,t={url:a.queryURL,dataType:"jsonp",type:"GET",jsonp:"callback",contentType:"application/json",success:function(a){void 0!==e&&null!==e&&e(a)},error:function(){}};_.has(a.facetConfig,"callbacks")&&_.has(a.facetConfig.callbacks,"list")&&(t.jsonpCallback=a.facetConfig.callbacks.list),$.ajax(t)},populateListItems:function(){var e,a=this,t=a.collectionData.length;if(a.listItemViews=[],t>0){_.each(a.collectionData,function(e){var t=a.facetConfig.generateListItemContext(a,e),n=new ListItemView({chaperone:a,data:t});a.listItemViews.push(n)});var n=new ListBonusView({chaperone:a});3>t||(e=new AdView({chaperone:a})),8>t?6>t?3>t?a.listItemViews.splice(1,0,n):(a.listItemViews.splice(1,0,n),a.listItemViews.splice(4,0,e)):(a.listItemViews.splice(2,0,n),a.listItemViews.splice(5,0,e)):(a.listItemViews.splice(3,0,n),a.listItemViews.splice(7,0,e))}else{var i=new NoItemsView({chaperone:a});a.listItemViews.push(i),e=new AdView({chaperone:a}),a.listItemViews.push(e)}return a},buildList:function(){var e=this,a=e.facetConfig,t=e.$el.find("."+a.listClass),n=e.listHeaderView,i=e.paginationView;return e.createURL().fetchItems(function(r){{var s=e.$el.find("h3"),o=e.$el.find(".pagination");a.itemClasses.advertisement}"2"==r.status[0]&&(t.empty(),a.storeListResponseData(e,r),_.has(e.facetConfig,"listHasRightNav")&&e.facetConfig.listHasRightNav===!0&&(a.renderRightNav(e),e.chaperone.view.rightMenu.render()),n.emptyElement().setElement(s).render(),e.populateListItems(),_.each(e.listItemViews,function(e){var a=$(e.buildItemHolder());t.append(a),e.setElement(a).render().bindEvents()}),i.emptyElement().setElement(o).render())}),e},render:function(){var e=this,a=e.chaperone.view.navView,t=e.facetConfig;0===a.$el.find(".left-small > *").length&&a.$el.find(".left-small").html(rT("general","_tC",{})),0===a.$el.find(".right-small > *").length&&a.$el.find(".right-small").html(rT("general","_tK",{})),a.$el.find(".left-small .back-button").unbind(),a.$el.find(".right-small .menu-icon").unbind();var n=rT("general","_tJ",{listHolderID:t.listHolderID,listHeaderBase:t.listHeaderBase,listClass:t.listClass});if(e.$el.html(n),_.has(e.queryDict,"page")&&1==parseInt(e.queryDict.page,10)){var i=_.clone(e.queryDict);delete i.page,redirectURL=_.isEmpty(i)?"!/"+e.facetSlug+"/":"!/"+e.facetSlug+"/refine/"+e.facetConfig.reassembleFacets(i)+"/",e.chaperone.navigate(redirectURL,!1)}return e.buildList(),e},bindEvents:function(){var e=this,a=e.chaperone.view.navView;$(".exit-off-canvas").on("click",function(e){return e.stopPropagation(),$(".off-canvas-wrap").removeClass("move-left"),!1});var t,n=a.$el.find(".back-button"),i=a.$el.find(".menu-icon");return n.unbind(),i.unbind(),n.on("touchstart",function(){$(this).addClass("tapped")}),n.on("touchend",function(){$(this).removeClass("tapped")}),n.on("click",function(a){if(a.stopPropagation(),$(this).addClass("chosen"),$(this).removeClass("tapped"),_.has(e.queryDict,"page")&&e.queryDict.page>1){var n=_.clone(e.queryDict);delete n.page,n.page=e.queryDict.page-1,t="!/"+e.facetSlug+"/refine/"+e.facetConfig.reassembleFacets(n)+"/"}else t=_.isEmpty(e.queryDict)||_.has(e.queryDict,"page")?"!/":_.isEmpty(e.chaperone.view.tagArchiveQueryDict)?"!/"+e.facetSlug+"/":"!/"+e.facetSlug+"/tags/"+e.facetConfig.reassembleFacets(e.chaperone.view.tagArchiveQueryDict)+"/";return e.chaperone.navigate(t,!0),!1}),_.has(e.facetConfig,"listHasRightNav")&&e.facetConfig.listHasRightNav===!0&&(i.on("touchstart",function(){$(this).addClass("tapped")}),i.on("touchend",function(){$(this).removeClass("tapped")}),i.on("click",function(e){return e.stopPropagation(),rW(),$(this).addClass("chosen"),$(this).removeClass("tapped"),$(".off-canvas-wrap").addClass("move-left"),!1})),e},transitionAnimations:function(e){var a=this,t=a.chaperone.view.navView,n=t.$el.find(".left-small"),i=t.$el.find(".right-small");return void 0===e&&(e=null),n.is(":visible")?null!==e&&(n.fadeOut(325),n.fadeIn(325)):null!==e?n.delay(200).fadeIn(450):n.show(),_.has(a.facetConfig,"listHasRightNav")&&a.facetConfig.listHasRightNav===!0?i.is(":visible")?null!==e&&(i.fadeOut(325),i.fadeIn(325)):null!==e?i.delay(200).fadeIn(450):i.show():i.is(":visible")&&(null!==e?i.fadeOut(450):i.hide()),a}}),PaginationView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&void 0!==e.chaperone&&(a.chaperone=e.chaperone)},emptyElement:function(){var e=this;return e.$el.empty(),e},render:function(){var e=this,a=_.clone(e.chaperone.queryDict),t="";delete a.page,_.isEmpty(a)||(t=e.chaperone.facetConfig.reassembleFacets(a)+",");var n=rT(e.chaperone.facetSlug,"_tP",{facetSlug:e.chaperone.facetSlug,paginationData:e.chaperone.paginationData,pagelessQueryDict:t});return e.$el.html(n),e}}),VisualizationView=Backbone.View.extend({initialize:function(e){var a=this;if(void 0!==e&&(void 0!==e.chaperone&&(a.chaperone=e.chaperone),void 0!==e.facetSlug&&(a.facetSlug=e.facetSlug,a.facetConfig=facetConfigs[a.facetSlug]),void 0!==e.facets)){var t=e.facets.split(","),n={};_.each(t,function(e){var a=e.split("=");n[a[0]]=a[1]});var i=a.facetConfig.parseListViewFacets(a,n);if(_.isEmpty(i)){var r="!/"+a.facetSlug+"/in-depth/";Backbone.history.fragment!=r&&a.chaperone.navigate(r,!1)}else a.setQueryDict(i)}a.chaperone.view.tagArchiveQueryDict={},a.isFacetlessView=_.isEmpty(a.chaperone.view.listQueryDict)},setQueryDict:function(e){var a=this,t={};return t=void 0===e||null===e?{}:e,a.queryDict=t,a.chaperone.view.listQueryDict=t,a},render:function(){var e,a=this,t=a.chaperone.view.navView,n=a.facetConfig;return 0===t.$el.find(".left-small > *").length&&t.$el.find(".left-small").html(rT("general","_tC",{})),t.$el.find(".left-small .back-button").unbind(),n.renderVisualization(a,function(t){if("2"==t.status[0]){_.each(n.visualizationDataMap,function(e,n){a[n]=t[e]});var i=n.generateVisualizationContext(a);e=rT(a.facetSlug,"_tV",i)}a.$el.html(e),n.visualizationPostRenderHooks(a),a.bindEvents()}),a},bindEvents:function(){var e,a=this,t=a.chaperone.view.navView,n=a.chaperone.view.listQueryDict,i=t.$el.find(".back-button"),r=$(".about-app-trigger");return r.unbind(),r.on("touchstart",function(){$(this).addClass("tapped")}),r.on("touchend",function(){$(this).removeClass("tapped")}),r.on("click",function(e){e.stopPropagation(),$(this).removeClass("tapped"),$(this).parent().hasClass("active")?($(this).parent().removeClass("active"),$(this).next().slideUp(650)):($(this).parent().addClass("active"),$(this).next().slideDown(650))}),i.unbind(),i.on("touchstart",function(){$(this).addClass("tapped")}),i.on("touchend",function(){$(this).removeClass("tapped")}),i.on("click",function(t){return t.stopPropagation(),$(this).addClass("chosen"),$(this).removeClass("tapped"),e=a.isFacetlessView?"!/"+a.facetSlug+"/":"!/"+a.facetSlug+"/refine/"+a.facetConfig.reassembleFacets(n)+"/",a.chaperone.navigate(e,!0),!1}),a},transitionAnimations:function(e){var a=this,t=a.chaperone.view.navView,n=t.$el.find(".left-small"),i=t.$el.find(".right-small");return void 0===e&&(e=null),n.is(":visible")?null!==e&&(n.fadeOut(325),n.fadeIn(325)):null!==e?n.delay(200).fadeIn(450):n.show(),i.is(":visible")&&(null!==e?i.fadeOut(450):i.hide()),a}}),DetailView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&(void 0!==e.chaperone&&(a.chaperone=e.chaperone),void 0!==e.facetSlug&&(a.facetSlug=e.facetSlug,a.facetConfig=facetConfigs[a.facetSlug]),void 0!==e.dataID&&(a.dataID=e.dataID)),a.isFacetlessView=_.isEmpty(a.chaperone.view.listQueryDict)},createURL:function(){var e=this;return e.queryURL=generateURLs[e.facetSlug].detail(e),e},fetchItem:function(e){var a=this,t={url:a.queryURL,dataType:"jsonp",type:"GET",jsonp:"callback",contentType:"application/json",success:function(a){void 0!==e&&null!==e&&e(a)},error:function(){}};_.has(a.facetConfig,"callbacks")&&_.has(a.facetConfig.callbacks,"detail")&&(t.jsonpCallback=a.facetConfig.callbacks.detail),$.ajax(t)},render:function(){var e=this,a=e.chaperone.view.navView,t=e.facetConfig;return 0===a.$el.find(".left-small > *").length&&a.$el.find(".left-small").html(rT("general","_tC",{})),a.$el.find(".left-small .back-button").unbind(),e.createURL().fetchItem(function(a){var n="";"2"==a.status[0]&&(e.rowContext=t.generateDetailViewContext(a,{facetSlug:e.facetSlug}),n=rT(e.facetSlug,"_tE",e.rowContext)),e.$el.html(n),e.postRender().bindEvents()}),e},postRender:function(){var e=this,a=e.facetConfig;return a.detailPostRenderHooks(e),e},bindEvents:function(){var e,a=this,t=a.chaperone.view.navView,n=a.chaperone.view.listQueryDict,i=t.$el.find(".back-button"),r=$(".about-app-trigger");return r.unbind(),r.on("touchstart",function(){$(this).addClass("tapped")}),r.on("touchend",function(){$(this).removeClass("tapped")}),r.on("click",function(e){e.stopPropagation(),$(this).removeClass("tapped"),$(this).parent().hasClass("active")?($(this).parent().removeClass("active"),$(this).next().slideUp(650)):($(this).parent().addClass("active"),$(this).next().slideDown(650))}),i.unbind(),i.on("touchstart",function(){$(this).addClass("tapped")}),i.on("touchend",function(){$(this).removeClass("tapped")}),i.on("click",function(t){return t.stopPropagation(),$(this).addClass("chosen"),$(this).removeClass("tapped"),e=a.isFacetlessView?"!/"+a.facetSlug+"/":"!/"+a.facetSlug+"/refine/"+a.facetConfig.reassembleFacets(n)+"/",a.chaperone.navigate(e,!0),!1}),a},transitionAnimations:function(e){var a=this,t=a.chaperone.view.navView,n=t.$el.find(".left-small"),i=t.$el.find(".right-small");return void 0===e&&(e=null),n.is(":visible")?null!==e&&(n.fadeOut(325),n.fadeIn(325)):null!==e?n.delay(200).fadeIn(450):n.show(),i.is(":visible")&&(null!==e?i.fadeOut(450):i.hide()),a}}),ListHeaderView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&void 0!==e.chaperone&&(a.chaperone=e.chaperone)},emptyElement:function(){var e=this;return e.$el.empty(),e},render:function(){var e=this,a=e.chaperone.facetConfig,t=rT(e.chaperone.facetSlug,"_tH",{baseDisplay:a.listHeaderBase,enhancedDisplay:a.enhanceHeader(e.chaperone),currentPage:e.chaperone.paginationData.currentPage,totalPages:e.chaperone.paginationData.totalPages});return e.$el.html(t),e}}),ListItemView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&(void 0!==e.chaperone&&(a.chaperone=e.chaperone),void 0!==e.data&&(a.data=e.data))},buildItemHolder:function(){var e=this,a=e.chaperone.facetConfig.itemClasses.detail;return'<li class="'+a+'" data-id="'+e.data.id+'"></li>'},render:function(){var e=this,a=rT(e.chaperone.facetSlug,"_tI",{rowData:e.data,facetSlug:e.chaperone.facetSlug});return e.$el.html(a),e},bindEvents:function(){var e=this;return e.$el.unbind(),e.$el.on("touchstart",function(){$(this).addClass("tapped")}),e.$el.on("touchend",function(){$(this).removeClass("tapped")}),e}}),NoItemsView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&void 0!==e.chaperone&&(a.chaperone=e.chaperone)},buildItemHolder:function(){var e=this,a=e.chaperone.facetConfig.itemClasses.placeholder;return'<li class="'+a+'"></li>'},render:function(){var e=this,a=(e.chaperone.facetConfig,rT(e.chaperone.facetSlug,"_tQ",{}));return e.$el.html(a),e},bindEvents:function(){var e=this;return e}}),AdView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&void 0!==e.chaperone&&(a.chaperone=e.chaperone)},buildItemHolder:function(){var e=this,a=e.chaperone.facetConfig.itemClasses.advertisement;return'<li class="'+a+'"></li>'},render:function(){var e=this,a=(e.chaperone.facetConfig,rT(e.chaperone.facetSlug,"_tB",{cbValue:Date.now()}));return e.$el.html(a),e},bindEvents:function(){var e=this;return e}}),ListBonusView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&void 0!==e.chaperone&&(a.chaperone=e.chaperone),a.pagelessQueryDict=_.clone(a.chaperone.queryDict),delete a.pagelessQueryDict.page},buildItemHolder:function(){var e=this,a=e.chaperone.facetConfig,t=a.generateBonusItemClass(e);return'<li class="bonus-item '+t+'"></li>'},render:function(){var e=this,a=e.chaperone.facetConfig,t=(e.chaperone.facetSlug,a.generateBonusItemContext(e));t.itemURL=a.generateBonusItemURL(e);var n=rT(e.chaperone.facetSlug,"_tD",t);return e.$el.html(n),e},bindEvents:function(){{var e=this;e.chaperone.facetConfig,e.chaperone.facetSlug}return e.$el.unbind(),e.$el.on("touchstart",function(){$(this).addClass("tapped")}),e.$el.on("touchend",function(){$(this).removeClass("tapped")}),e}}),TagArchiveView=Backbone.View.extend({initialize:function(e){var a=this;if(void 0!==e&&(void 0!==e.chaperone?(a.chaperone=e.chaperone,a.setQueryDict({})):a.setQueryDict({}),void 0!==e.facetSlug&&(a.facetSlug=e.facetSlug,a.facetConfig=facetConfigs[a.facetSlug]),void 0!==e.queryDict&&a.setQueryDict(e.queryDict),void 0!==e.initialFacets)){var t=e.initialFacets.split(","),n={};_.each(t,function(e){var a=e.split("=");n[a[0]]=a[1]});var i=a.facetConfig.parseTagArchiveFacets(a,n);if(_.isEmpty(i)){var r="!/"+a.facetSlug+"/";Backbone.history.fragment!=r&&a.chaperone.navigate(r,!1)}else a.setQueryDict(i)}a.listHeaderView=new TagArchiveHeaderView({chaperone:a}),a.isFacetlessView=_.isEmpty(a.chaperone.view.tagArchiveQueryDict),a.paginationView=new TagPaginationView({chaperone:a})},setQueryDict:function(e){var a=this,t={};return t=void 0===e||null===e?{}:e,a.queryDict=t,a.chaperone.view.tagArchiveQueryDict=t,a},createURL:function(){var e=this;return e.queryURL=generateURLs[e.facetSlug].tagArchive(e),e},fetchItems:function(e){var a=this;$.ajax({url:a.queryURL,dataType:"jsonp",type:"GET",jsonp:"callback",contentType:"application/json",success:function(a){void 0!==e&&null!==e&&e(a)},error:function(){}})},populateListItems:function(){var e,a=this,t=a.collectionData.length;if(a.listItemViews=[],t>0)_.each(a.collectionData,function(e){var t=new TagArchiveItemView({chaperone:a,data:e});a.listItemViews.push(t)}),3>t||(e=new AdView({chaperone:a})),3>t?a.listItemViews.splice(1,0,e):a.listItemViews.splice(2,0,e);else{var n=new NoTagItemsView({chaperone:a});a.listItemViews.push(n),e=new AdView({chaperone:a}),a.listItemViews.push(e)}return a},buildList:function(){var e=this,a=e.facetConfig,t=e.$el.find("."+a.tagArchiveClass),n=e.listHeaderView,i=e.paginationView;return e.createURL().fetchItems(function(r){{var s=e.$el.find("h3"),o=e.$el.find(".pagination");a.itemClasses.tagAdvertisement}"2"==r.status[0]&&(t.empty(),e.collectionData=r.tags,e.paginationData=r.pagination,n.emptyElement().setElement(s).render(),e.populateListItems(),_.each(e.listItemViews,function(e){var a=$(e.buildItemHolder());t.append(a),e.setElement(a).render()}),i.emptyElement().setElement(o).render())}),e},render:function(){var e=this,a=e.chaperone.view.navView;fc=e.facetConfig,0===a.$el.find(".left-small > *").length&&a.$el.find(".left-small").html(rT("general","_tC",{})),0===a.$el.find(".right-small > *").length&&a.$el.find(".right-small").html(rT("general","_tK",{})),a.$el.find(".left-small .back-button").unbind(),a.$el.find(".right-small .menu-icon").unbind();var t=rT("general","_tT",{listHolderID:fc.listHolderID,tagArchiveHeaderPlaceholder:fc.tagArchiveHeaderPlaceholder,tagArchiveClass:fc.tagArchiveClass});if(e.$el.html(t),_.has(e.queryDict,"page")&&1==parseInt(e.queryDict.page,10)){var n=_.clone(e.queryDict);delete n.page,redirectURL=_.isEmpty(n)?"!/"+e.facetSlug+"/tags/":"!/"+e.facetSlug+"/tags/"+e.facetConfig.reassembleFacets(n)+"/",e.chaperone.navigate(redirectURL,!1)}return e.buildList(),e},bindEvents:function(){var e,a=this,t=a.chaperone.view.navView,n=t.$el.find(".back-button");return n.unbind(),n.on("touchstart",function(){$(this).addClass("tapped")}),n.on("touchend",function(){$(this).removeClass("tapped")}),n.on("click",function(t){if(t.stopPropagation(),$(this).addClass("chosen"),$(this).removeClass("tapped"),_.has(a.queryDict,"page")&&a.queryDict.page>1){var n=_.clone(a.queryDict);delete n.page,n.page=a.queryDict.page-1,e="!/"+a.facetSlug+"/tags/"+a.facetConfig.reassembleFacets(n)+"/"}else e=_.isEmpty(a.queryDict)||_.has(a.queryDict,"page")?"!/"+a.facetSlug+"/":"!/"+a.facetSlug+"/tags/";return a.chaperone.navigate(e,!0),!1}),a},transitionAnimations:function(e){var a=this,t=a.chaperone.view.navView,n=t.$el.find(".left-small"),i=t.$el.find(".right-small");return void 0===e&&(e=null),n.is(":visible")?null!==e&&(n.fadeOut(325),n.fadeIn(325)):null!==e?n.delay(200).fadeIn(450):n.show(),i.is(":visible")&&(null!==e?i.fadeOut(450):i.hide()),a}}),TagArchiveHeaderView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&void 0!==e.chaperone&&(a.chaperone=e.chaperone)},emptyElement:function(){var e=this;return e.$el.empty(),e},render:function(){var e=this,a=e.chaperone.facetConfig,t=rT(e.chaperone.facetSlug,"_tR",{baseDisplay:a.listHeaderBase,enhancedDisplay:a.enhanceTagArchiveHeader(e.chaperone)});return e.$el.html(t),e}}),TagPaginationView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&void 0!==e.chaperone&&(a.chaperone=e.chaperone)},emptyElement:function(){var e=this;return e.$el.empty(),e},render:function(){var e=this,a=_.clone(e.chaperone.queryDict),t="";delete a.page,_.isEmpty(a)||(t=e.chaperone.facetConfig.reassembleFacets(a)+",");var n=rT("general","_tU",{facetSlug:e.chaperone.facetSlug,paginationData:e.chaperone.paginationData,pagelessQueryDict:t});return e.$el.html(n),e}}),TagArchiveItemView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&(void 0!==e.chaperone&&(a.chaperone=e.chaperone),void 0!==e.data&&(a.data=e.data))},buildItemHolder:function(){var e=this,a=e.chaperone.facetConfig.itemClasses.tagArchiveItem;return'<li class="'+a+'" data-slug="'+e.data.slug+'"></li>'},render:function(){var e=this,a=rT(e.chaperone.facetSlug,"_tS",{facetSlug:e.chaperone.facetSlug,rowData:e.data});return e.$el.html(a),e}}),NoTagItemsView=Backbone.View.extend({initialize:function(e){var a=this;void 0!==e&&void 0!==e.chaperone&&(a.chaperone=e.chaperone)},buildItemHolder:function(){var e=this,a=e.chaperone.facetConfig.itemClasses.placeholder;return'<li class="'+a+'"></li>'},render:function(){var e=this,a=(e.chaperone.facetConfig,rT(e.chaperone.facetSlug,"_tQ",{}));return e.$el.html(a),e},bindEvents:function(){var e=this;return e}}),AppRouter=Backbone.Router.extend({routes:{"!/":"homeScreen","!/:facetSlug/":"facetList","!/:facetSlug/in-depth/":"facetDataVis","!/:facetSlug/refine/:facets/":"facetList","!/:facetSlug/refine/:facets/in-depth/":"facetDataVis","!/:facetSlug/tags/":"allTags","!/:facetSlug/tags/:facets/":"allTags","!/:facetSlug/items/:itemID/":"facetDetail"},initialize:function(){var e=this;e.view=new AppView({el:$("#app")});var a=Backbone.history.start();a===!1&&e.navigate("!/",{trigger:!0})},homeScreen:function(){var e=this,a=e.view,t=a.contentViews,n=a.currentViewLevel,i=0,r=new HomepageView({chaperone:e});if(a.attachView(r,i),void 0!==a)if(0>n)a.setViewLevel(i).render();else if(n==i)a.renderSection(t[i],null,null);else{var s=t[i],o=t[n];a.renderSection(s,o,i),setTimeout(function(){a.removeView(n)},750)}},facetList:function(e,a){var t=this,n=t.view,i=n.contentViews,r=n.currentViewLevel,s=1,o=new ListView({chaperone:t,facetSlug:e,initialFacets:a});if(n.attachView(o,s),void 0!==n)if(0>r)n.setViewLevel(s).render();else if(r==s)n.renderSection(i[s],null,null);else{var c=i[s],l=i[r];n.renderSection(c,l,s),setTimeout(function(){n.removeView(r)},750)}},facetDataVis:function(e,a){var t=this,n=t.view,i=n.contentViews,r=n.currentViewLevel,s=2,o=new VisualizationView({chaperone:t,facetSlug:e,facets:a});if(n.attachView(o,s),void 0!==n)if(0>r)n.setViewLevel(s).render();else if(r==s)n.renderSection(i[s],null,null);else{var c=i[s],l=i[r];n.renderSection(c,l,s),setTimeout(function(){n.removeView(r)},750)}},facetDetail:function(e,a){var t=this,n=t.view,i=n.contentViews,r=n.currentViewLevel,s=2,o=new DetailView({chaperone:t,facetSlug:e,dataID:a});if(n.attachView(o,s),void 0!==n)if(0>r)n.setViewLevel(s).render();else if(r==s)n.renderSection(i[s],null,null);else{var c=i[s],l=i[r];n.renderSection(c,l,s),setTimeout(function(){n.removeView(r)},750)}},allTags:function(e,a){var t=this,n=t.view,i=n.contentViews,r=n.currentViewLevel,s=1,o=new TagArchiveView({chaperone:t,facetSlug:e,initialFacets:a});if(n.attachView(o,s),void 0!==n)if(0>r)n.setViewLevel(s).render();else if(r==s)n.renderSection(i[s],null,null);else{var c=i[s],l=i[r];n.renderSection(c,l,s),setTimeout(function(){n.removeView(r)},750)}}});$(document).ready(function(){SwiftClick.attach(document.body),app=new AppRouter}),$(window).resize(function(){rW()});